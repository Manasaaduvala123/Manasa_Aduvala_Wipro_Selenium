// 5Q. Use Data Provider to supply multiple sets of usernames/passwords to a login test.

package miniProject;

import org.openqa.selenium.*;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.support.ui.*;
import org.testng.annotations.*;
import java.time.Duration;

public class MultipleSets {
    WebDriver driver;
    WebDriverWait wait;

    @BeforeMethod
    public void setup() {
        driver = new ChromeDriver();
        driver.manage().window().maximize();
        driver.get("https://www.ebay.com/");
        wait = new WebDriverWait(driver, Duration.ofSeconds(10));
    }

    @DataProvider(name = "loginData")
    public Object[][] getLoginData() {
        return new Object[][] {
            {"manasaaduvala123@gmail.com", "@admin123"},
            {"manasa@gmail.com", "@admin456"},
            {"aduvalamanasa@gmail.com", "@admin789"}
        };
    }

    @Test(dataProvider = "loginData")
    public void loginTest(String username, String password) {
        try {
            wait.until(ExpectedConditions.elementToBeClickable(By.linkText("Sign in"))).click();
            wait.until(ExpectedConditions.visibilityOfElementLocated(By.id("userid"))).sendKeys(username);
            driver.findElement(By.id("signin-continue-btn")).click();
            wait.until(ExpectedConditions.visibilityOfElementLocated(By.id("pass"))).sendKeys(password);
            driver.findElement(By.id("sgnBt")).click();
            wait.until(ExpectedConditions.or(
                ExpectedConditions.visibilityOfElementLocated(By.id("gh-ug")),        
                ExpectedConditions.visibilityOfElementLocated(By.id("errormsg"))       
            ));
            System.out.println("Tried login with: " + username + " / " + password);
        } catch (Exception e) {
            System.out.println("Login attempt failed for: " + username);
        }
    }

    @AfterMethod
    public void teardown() {
        driver.quit();
    }
}
